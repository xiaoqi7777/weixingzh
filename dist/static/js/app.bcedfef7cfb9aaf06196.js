webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),i={name:"App",data:function(){return{openId:null}},methods:{getSDK:function(){var e=location.href;console.log("fasong*------",e),this.axio.get("/sdk?url="+e).then(function(e){var t=e.data;console.log("signature",t),wx.config({debug:!1,appId:"wx3df629936bf31f75",timestamp:t.timestamp,nonceStr:t.noncestr,signature:t.signature,jsApiList:["startRecord","stopRecord","onVoiceRecordEnd","translateVoice","playVoice","pauseVoice","stopVoice","uploadVoice","chooseImage","previewImage","downloadVoice","chooseWXPay"]}),wx.ready(function(){wx.checkJsApi({jsApiList:["startRecord","stopRecord","playVoice","chooseWXPay"],success:function(e){console.log("成功获取res",e)}})}),wx.error(function(e){console.log("失败",e)})})},oAuth:function(){location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx3df629936bf31f75&redirect_uri=http://tsml520.cn&response_type=code&scope=snsapi_userinfo&state=STATEsg#wechat_redirect"},getOpenID:function(){var e=this;this.axio.get("/user/getOpenId?code="+this.code).then(function(t){e.openId=t.data,console.log("获取openId",t)})},isSubscribe:function(){var e=location.href;if(console.log(!e.includes("code=")),e.includes("code=")){var t=e.indexOf("code=")+5,n=e.indexOf("&state");this.code=e.slice(t,n),console.log("this.code",this.code),this.getSDK(),this.getOpenID()}else this.oAuth()}},mounted:function(){this.isSubscribe()}},a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view",{attrs:{openId:this.openId}})],1)},staticRenderFns:[]};var s=n("VU/8")(i,a,!1,function(e){n("RALA")},null,null).exports,c=n("/ocq"),r=n("Xxa5"),p=n.n(r),d=n("exGp"),u=n.n(d),l={props:["openId"],data:function(){return{localId:null,base64:null,input:0,obj:null}},methods:{scanPay:function(){var e=this;0===this.input&&alert("请输入金额"),this.axio.post("/user/wx",{data:this.input}).then(function(t){e.base64=t.data,console.log("++++++++",t)})},startyin:function(){wx.startRecord()},stopyin:function(){var e=this;wx.stopRecord({success:function(t){e.localId=t.localId,alert(e.localId)}})},playyin:function(){wx.playVoice({localId:this.localId})},onBridgeReady:function(e){console.log("请求的数据",e),WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:"prepay_id="+e.package,signType:"MD5",paySign:e.paySign},function(e){e.err_msg})},commonPay:function(){var e=this;return u()(p.a.mark(function t(){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.axio.post("/user/commonPay",{money:e.input});case 2:n=t.sent,e.obj=n.data,e.onBridgeReady(e.obj);case 5:case"end":return t.stop()}},t,e)}))()}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"div",on:{click:e.startyin}},[e._v("开启录音")]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"div",on:{click:e.stopyin}},[e._v("停止录音")]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"div",on:{click:e.playyin}},[e._v("播放")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],attrs:{type:"text"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}}),e._v(" "),n("div",{staticClass:"div",on:{click:e.scanPay}},[e._v("扫码支付")]),e._v(" "),n("div",{staticClass:"div",on:{click:e.commonPay}},[e._v("普通支付")]),e._v(" "),n("img",{attrs:{src:e.base64,alt:"",srcset:""}})])},staticRenderFns:[]};var f=n("VU/8")(l,v,!1,function(e){n("qa2r")},"data-v-4717a5e4",null).exports;o.a.use(c.a);var h=new c.a({routes:[{path:"/",name:"HelloWorld",component:f}]}),g=n("aozt"),m=n.n(g);o.a.config.productionTip=!1;o.a.prototype.axio=m.a.create({baseURL:"http://tsml520.cn"}),new o.a({el:"#app",router:h,components:{App:s},template:"<App/>"})},RALA:function(e,t){},qa2r:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bcedfef7cfb9aaf06196.js.map